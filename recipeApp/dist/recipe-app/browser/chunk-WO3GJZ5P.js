import{a as j}from"./chunk-ZYCDTQGM.js";import{a as H,c as q,d as P,f as Q,h as k,i as O,o as G,p as z,q as B,t as J}from"./chunk-TKH6U2ER.js";import{$ as C,Ba as K,Ca as U,Da as g,Ea as W,G as l,H as d,I as L,M as b,O as u,R as a,S as s,T as f,U as M,V as w,W as h,Y as E,Z as V,_ as F,aa as m,ba as I,ca as A,la as R,ma as N,s as _,t as x,v,va as D,w as S,z as y,za as T}from"./chunk-XCSCIBJ5.js";function Z(n,i){}function $(n,i){n&1&&(a(0,"div",5),f(1,"app-loading-spinner"),s())}function ee(n,i){if(n&1){let p=M();a(0,"form",6,7),w("ngSubmit",function(){v(p);let e=C(1),o=h();return S(o.onSubmit(e))}),a(2,"div",8)(3,"label",9),m(4,"Email"),s(),f(5,"input",10),s(),a(6,"div",8)(7,"label",11),m(8,"Password"),s(),f(9,"input",12),s(),a(10,"div",13)(11,"button",14),m(12),s(),m(13," | "),a(14,"button",15),w("click",function(){v(p);let e=h();return S(e.onSwitchMode())}),m(15),s()()()}if(n&2){let p=C(1),t=h();l(11),u("disabled",!p.valid),l(),I(t.isLoginMode?"Login":"Sign up"),l(3),A("",t.isLoginMode?"Switch to Sign up":"Swith to Login"," ")}}var X=(()=>{let i=class i{constructor(t,e,o){this.authService=t,this.router=e,this.componentFactoryResolver=o,this.isLoginMode=!0,this.isLoading=!1,this.error=null}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;let e=t.value.email,o=t.value.password,r;this.isLoading=!0,this.isLoginMode?r=this.authService.login(e,o):(console.log(t.value),r=this.authService.signup(e,o)),r.subscribe(c=>{console.log(c),this.isLoading=!1,this.router.navigate(["/recipes"])},c=>{console.log(c),this.error=c,this.showErrorAlert(c),this.isLoading=!1}),t.reset()}onHandleError(){this.error=null}showErrorAlert(t){let e=this.componentFactoryResolver.resolveComponentFactory(K),o=this.alertHost.viewContainerRef;o.clear();let r=o.createComponent(e);r.instance.message=t,this.closeSub=r.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),o.clear()})}};i.\u0275fac=function(e){return new(e||i)(d(j),d(D),d(L))},i.\u0275cmp=_({type:i,selectors:[["app-auth"]],viewQuery:function(e,o){if(e&1&&E(g,5),e&2){let r;V(r=F())&&(o.alertHost=r.first)}},decls:5,vars:2,consts:[["appPlaceholder",""],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","pasword","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],[2,"margin-top","10px"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-primary",3,"click"]],template:function(e,o){e&1&&(b(0,Z,0,0,"ng-template",0),a(1,"div",1)(2,"div",2),b(3,$,2,0,"div",3)(4,ee,16,3,"form",4),s()()),e&2&&(l(3),u("ngIf",o.isLoading),l(),u("ngIf",!o.isLoading))},dependencies:[R,O,H,q,P,G,B,z,k,Q,U,g]});let n=i;return n})();var he=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=x({type:i}),i.\u0275inj=y({imports:[N,J,T.forChild([{path:"",component:X}]),W]});let n=i;return n})();export{he as AuthModule};
